# Bumpãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼æ©Ÿèƒ½ - ä»•æ§˜æ›¸

> Disboardãƒ»ãƒ‡ã‚£ã‚¹é€Ÿã®Bumpãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼æ©Ÿèƒ½ã®è©³ç´°ä»•æ§˜

æœ€çµ‚æ›´æ–°: 2026å¹´2æœˆ18æ—¥

---

## ğŸ“‹ æ¦‚è¦

Discordã‚µãƒ¼ãƒãƒ¼ã®Bumpï¼ˆå®£ä¼ï¼‰ã‚³ãƒãƒ³ãƒ‰ã‚’æ¤œçŸ¥ã—ã€2æ™‚é–“å¾Œã«ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚’é€ä¿¡ã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚

### å¯¾å¿œã‚µãƒ¼ãƒ“ã‚¹

| ã‚µãƒ¼ãƒ“ã‚¹å             | ã‚³ãƒãƒ³ãƒ‰ | Bot ID               | URL                   |
| ---------------------- | -------- | -------------------- | --------------------- |
| **Disboard**           | `/bump`  | `302050872383242240` | https://disboard.org/ |
| **ãƒ‡ã‚£ã‚¹é€Ÿ (Dissoku)** | `/up`    | `761562078095867916` | https://dissoku.net/  |

### ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‹•ä½œ

**Bumpãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼æ©Ÿèƒ½ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æœ‰åŠ¹ã§ã™ã€‚**

- æ–°è¦ã‚µãƒ¼ãƒãƒ¼ã§ã¯åˆæœŸçŠ¶æ…‹ã§æ©Ÿèƒ½ãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™
- `/bump` ã¾ãŸã¯ `/up` ã‚³ãƒãƒ³ãƒ‰ã‚’æ¤œçŸ¥ã™ã‚‹ã¨è‡ªå‹•ã§ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ãŒè¨­å®šã•ã‚Œã¾ã™
- ç„¡åŠ¹åŒ–ã—ãŸã„å ´åˆã¯ `/bump-reminder-config disable` ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„

---

## ğŸ¯ ä¸»è¦æ©Ÿèƒ½

### 1. Bumpæ¤œçŸ¥

**messageCreateã‚¤ãƒ™ãƒ³ãƒˆ**ã§ä»¥ä¸‹ã‚’ç›£è¦–ï¼š

```typescript
// Disboardã®å ´åˆ
if (
  message.author.id === "302050872383242240" &&
  message.interaction?.commandName === "bump"
) {
  await handleBumpDetected(client, guildId, channelId, message.id, "Disboard");
}

// ãƒ‡ã‚£ã‚¹é€Ÿã®å ´åˆ
if (
  message.author.id === "761562078095867916" &&
  message.interaction?.commandName === "up"
) {
  await handleBumpDetected(client, guildId, channelId, message.id, "Dissoku");
}
```

**æ¤œçŸ¥æ¡ä»¶:**

- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€ä¿¡è€…ãŒBumpBotï¼ˆDisboard ID: `302050872383242240` or ãƒ‡ã‚£ã‚¹é€Ÿ ID: `761562078095867916`ï¼‰
- `message.interaction?.commandName` ãŒ Disboard ã§ã¯ `bump`ã€ãƒ‡ã‚£ã‚¹é€Ÿã§ã¯ `up` ã§ã‚ã‚‹
- Bumpãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼æ©Ÿèƒ½ãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æœ‰åŠ¹ï¼‰
- `channelId` ãŒè¨­å®šæ¸ˆã¿ã®å ´åˆã¯ã€è¨­å®šãƒãƒ£ãƒ³ãƒãƒ«å†…ã§ã®æ¤œçŸ¥ã®ã¿æœ‰åŠ¹
- `serviceName` ã¨ã—ã¦ "Disboard" ã¾ãŸã¯ "Dissoku" ã‚’è¨˜éŒ²

### 2. ã‚¿ã‚¤ãƒãƒ¼ç®¡ç†

**å®Ÿè£…: JobSchedulerï¼ˆ1å›å®Ÿè¡Œã¯ setTimeoutï¼‰+ DBæ°¸ç¶šåŒ–**

```typescript
// 2æ™‚é–“å¾Œã®ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚’è¨­å®š
const delayMinutes = 120; // 2æ™‚é–“

await bumpReminderManager.setReminder(
  guildId,
  channelId,
  messageId,
  panelMessageId,
  delayMinutes,
  taskFactory, // ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼é€ä¿¡å‡¦ç†
  serviceName, // "Disboard" ã¾ãŸã¯ "Dissoku"
);
```

**JobSchedulerã®å‹•ä½œ:**

1. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜**: BumpReminderãƒ†ãƒ¼ãƒ–ãƒ«ã« `pending` ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã§ä¿å­˜

- guildId, channelId, messageId, panelMessageId, serviceName, scheduledAt, status

2. **1å›å®Ÿè¡Œã‚¸ãƒ§ãƒ–ã‚’ç™»éŒ²**: `setTimeout` ãƒ™ãƒ¼ã‚¹ã§æŒ‡å®šæ™‚åˆ»ã«ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œ
3. **å®Ÿè¡Œå¾Œã«ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°**: `sent` ã¾ãŸã¯ `cancelled` ã«å¤‰æ›´

**Botå†èµ·å‹•æ™‚ã®å¾©å…ƒ:**

- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆèµ·å‹•æ™‚ï¼ˆclientReadyï¼‰ã« `pending` ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚’å–å¾—
- å„ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã®ã‚¿ã‚¤ãƒãƒ¼ã‚’å†è¨­å®š
- æ—¢ã«æ™‚åˆ»ã‚’éãã¦ã„ã‚‹å ´åˆã¯å³åº§ã«å®Ÿè¡Œ

### 3. é€šçŸ¥ç™»éŒ²UI

**ãƒœã‚¿ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â„¹ Bumpãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼æ©Ÿèƒ½                   â”‚
â”‚                                          â”‚
â”‚ 54åˆ†å¾Œã«ãƒªãƒã‚¤ãƒ³ãƒ‰ãŒé€šçŸ¥ã•ã‚Œã¾ã™ã€‚       â”‚
â”‚ ï¼ˆDiscordã®ç›¸å¯¾ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—å½¢å¼ã§è¡¨ç¤ºï¼‰â”‚
â”‚                                          â”‚
â”‚ [ğŸ”” ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã™ã‚‹] [ğŸ”• ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã—ãªã„]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ©Ÿèƒ½:**

- `ğŸ”” ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã™ã‚‹`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ãƒªã‚¹ãƒˆã«è¿½åŠ 
- `ğŸ”• ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã—ãªã„`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ãƒªã‚¹ãƒˆã‹ã‚‰å‰Šé™¤
- ãƒ‘ãƒãƒ«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼é€ä¿¡å¾Œã«è‡ªå‹•å‰Šé™¤ã•ã‚Œã¾ã™

### 4. ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼é€ä¿¡

**é€šçŸ¥å¯¾è±¡:**

1. è¨­å®šã•ã‚ŒãŸãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ãƒ­ãƒ¼ãƒ«ï¼ˆ`mentionRoleId`ï¼‰
2. è¨­å®šã•ã‚ŒãŸãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆ`mentionUserIds`ï¼‰

**é€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç‰¹å¾´:**

- **ã‚µãƒ¼ãƒ“ã‚¹åˆ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**: Disboardã¨Dissokuã§ç•°ãªã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- **è¨­å®šã®å‹•çš„å–å¾—**: ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼é€ä¿¡æ™‚ã«æœ€æ–°ã®è¨­å®šã‚’å–å¾—ï¼ˆBumpæ¤œçŸ¥å¾Œã®è¨­å®šå¤‰æ›´ã‚‚åæ˜ ï¼‰

**ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¾‹:**

```
# ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ãªã—ã®å ´åˆ
â° `/bump`ãŒå‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã£ãŸã‚ˆï¼

# ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã‚ã‚Šã®å ´åˆ
@BumpRole @User1 @User2
â° `/bump`ãŒå‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã£ãŸã‚ˆï¼

# ãƒ‡ã‚£ã‚¹é€Ÿã®å ´åˆ
@BumpRole
â° `/up`ãŒå‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã£ãŸã‚ˆï¼
```

**ãƒ­ãƒ¼ã‚«ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³:**

| è¨€èª   | Disboard                            | Dissoku                           |
| ------ | ----------------------------------- | --------------------------------- |
| æ—¥æœ¬èª | `â° /bump ãŒå‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã£ãŸã‚ˆï¼` | `â° /up ãŒå‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã£ãŸã‚ˆï¼` |
| è‹±èª   | `â° /bump is ready!`                | `â° /up is ready!`                |

---

## âš™ï¸ è¨­å®šã‚³ãƒãƒ³ãƒ‰

### `/bump-reminder-config`

**å¿…è¦æ¨©é™**: `MANAGE_GUILD`ï¼ˆã‚µãƒ¼ãƒãƒ¼ç®¡ç†ï¼‰

#### ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰

**1. `enable` - æ©Ÿèƒ½æœ‰åŠ¹åŒ–**

```
/bump-reminder-config enable
```

- Bumpãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼æ©Ÿèƒ½ã‚’æœ‰åŠ¹åŒ–ï¼ˆã¾ãŸã¯disableå¾Œã®å†æœ‰åŠ¹åŒ–ï¼‰
- æ—¢å­˜ã®ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³è¨­å®šã¯ç¶­æŒ
- **æ³¨æ„**: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æœ‰åŠ¹ãªãŸã‚ã€é€šå¸¸ã¯å®Ÿè¡Œä¸è¦ã§ã™

**2. `disable` - æ©Ÿèƒ½ç„¡åŠ¹åŒ–**

```
/bump-reminder-config disable
```

- Bumpãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼æ©Ÿèƒ½ã‚’ç„¡åŠ¹åŒ–
- é€²è¡Œä¸­ã®ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚‚ã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼ˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ `cancelled` ã«å¤‰æ›´ï¼‰

**3. `set-mention` - ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³è¨­å®š**

```
# ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ãƒ­ãƒ¼ãƒ«ã‚’è¨­å®š
/bump-reminder-config set-mention role:@BumpRole

# ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’è¿½åŠ /å‰Šé™¤ï¼ˆãƒˆã‚°ãƒ«å‹•ä½œï¼‰
/bump-reminder-config set-mention user:@ãƒ¦ãƒ¼ã‚¶ãƒ¼

# ãƒ­ãƒ¼ãƒ«ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’åŒæ™‚è¨­å®š
/bump-reminder-config set-mention role:@BumpRole user:@ãƒ¦ãƒ¼ã‚¶ãƒ¼
```

- ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼é€ä¿¡æ™‚ã«ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã™ã‚‹ãƒ­ãƒ¼ãƒ«ã¾ãŸã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’è¨­å®š
- **ãƒ­ãƒ¼ãƒ«**: æŒ‡å®šã—ãŸãƒ­ãƒ¼ãƒ«ã«è¨­å®šï¼ˆä¸Šæ›¸ãï¼‰
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼**: ãƒªã‚¹ãƒˆã«å­˜åœ¨ã™ã‚‹å ´åˆã¯å‰Šé™¤ã€å­˜åœ¨ã—ãªã„å ´åˆã¯è¿½åŠ ï¼ˆãƒˆã‚°ãƒ«å‹•ä½œï¼‰
- **æ³¨æ„**: ãƒ­ãƒ¼ãƒ«ã¾ãŸã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã©ã¡ã‚‰ã‹ã¯å¿…é ˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ãªã—ã§ã®å®Ÿè¡Œã¯ä¸å¯ï¼‰

**4. `remove-mention` - ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³è¨­å®šå‰Šé™¤**

```
# ãƒ­ãƒ¼ãƒ«è¨­å®šã‚’å‰Šé™¤
/bump-reminder-config remove-mention target:role

# ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’é¸æŠã—ã¦å‰Šé™¤ï¼ˆè¤‡æ•°é¸æŠå¯èƒ½ãªUIè¡¨ç¤ºï¼‰
/bump-reminder-config remove-mention target:user

# å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã‚’å‰Šé™¤
/bump-reminder-config remove-mention target:users

# ãƒ­ãƒ¼ãƒ«ï¼‹å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å‰Šé™¤
/bump-reminder-config remove-mention target:all
```

- **role**: ãƒ­ãƒ¼ãƒ«è¨­å®šã®ã¿å‰Šé™¤
- **user**: ç™»éŒ²æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ã‹ã‚‰é¸æŠå‰Šé™¤ï¼ˆStringSelectMenu UIï¼‰
- **users**: å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã‚’ä¸€æ‹¬å‰Šé™¤
- **all**: ãƒ­ãƒ¼ãƒ«ã¨å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å®Œå…¨å‰Šé™¤

**5. `view` - è¨­å®šçŠ¶æ…‹è¡¨ç¤º**

```
/bump-reminder-config view
```

**è¡¨ç¤ºå†…å®¹:**

```
# ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³å¯¾è±¡ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Bumpãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼æ©Ÿèƒ½                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ çŠ¶æ…‹: æœ‰åŠ¹                               â”‚
â”‚ ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ãƒ­ãƒ¼ãƒ«: @BumpRole             â”‚
â”‚ ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼: @User1, @User2, @User3â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³å¯¾è±¡ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„å ´åˆ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Bumpãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼æ©Ÿèƒ½    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ çŠ¶æ…‹: æœ‰åŠ¹              â”‚
â”‚ ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ãƒ­ãƒ¼ãƒ«: ãªã—  â”‚
â”‚ ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼: ãªã—â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ³¨æ„:**

- ãƒ¦ãƒ¼ã‚¶ãƒ¼å€‹åˆ¥ã®ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ç™»éŒ²ON/OFFãƒœã‚¿ãƒ³ï¼ˆãƒ‘ãƒãƒ«UIï¼‰å®Ÿè£…æ¸ˆã¿
- Bumpæ¤œçŸ¥æ™‚ã«ãƒ‘ãƒãƒ«UIãŒè¡¨ç¤ºã•ã‚Œã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè‡ªåˆ†ã§ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ç™»éŒ²ã‚’ç®¡ç†å¯èƒ½
- ã‚µãƒ¼ãƒãƒ¼ç®¡ç†æ¨©é™ãŒã‚ã‚‹äººã‚‚ `/bump-reminder-config set-mention user:@ãƒ¦ãƒ¼ã‚¶ãƒ¼` ã§è¿½åŠ /å‰Šé™¤å¯èƒ½ï¼ˆãƒˆã‚°ãƒ«å‹•ä½œï¼‰

---

## ğŸ’¾ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ

### BumpReminder ãƒ†ãƒ¼ãƒ–ãƒ«

ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã®æ°¸ç¶šåŒ–ã«ç‹¬ç«‹ã—ãŸãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½¿ç”¨ï¼š

```prisma
model BumpReminder {
  id          String   @id @default(cuid())
  guildId     String
  channelId   String
  messageId   String?
  panelMessageId String?
  serviceName String?   // "Disboard" ã¾ãŸã¯ "Dissoku"
  scheduledAt DateTime
  status      String    // "pending" | "sent" | "cancelled"
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@index([guildId])
  @@index([status, scheduledAt])
  @@map("bump_reminders")
}
```

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç®¡ç†:**

- `pending`: ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼å¾…æ©Ÿä¸­ï¼ˆBotå†èµ·å‹•æ™‚ã«å¾©å…ƒå¯¾è±¡ï¼‰
- `sent`: ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼é€ä¿¡å®Œäº†
- `cancelled`: ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ¸ˆã¿ï¼ˆdisable ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ™‚ãªã©ï¼‰

### GuildConfig

Bumpãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã®è¨­å®šæƒ…å ±ï¼š

```prisma
model GuildConfig {
  // ...
  bumpReminderConfig String? // JSON: BumpReminderConfig
}
```

**GuildConfig ã‹ã‚‰å–å¾—ã™ã‚‹è¨­å®š:**

```typescript
interface BumpReminderConfig {
  enabled: boolean; // æ©Ÿèƒ½æœ‰åŠ¹/ç„¡åŠ¹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: trueï¼‰  channelId?: string; // Bumpæ¤œçŸ¥å¯¾è±¡ãƒãƒ£ãƒ³ãƒãƒ«IDï¼ˆæœªè¨­å®šæ™‚ã¯å…¨ãƒãƒ£ãƒ³ãƒãƒ«ã§æ¤œçŸ¥ï¼‰  mentionRoleId?: string; // ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ãƒ­ãƒ¼ãƒ«ID
  mentionUserIds: string[]; // ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼IDãƒªã‚¹ãƒˆ
}
```

**é‡è¦ãªè¨­è¨ˆåˆ¤æ–­:**

- **BumpReminderãƒ†ãƒ¼ãƒ–ãƒ«**: ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã®å®Ÿè¡ŒçŠ¶æ…‹ã‚’ç®¡ç†ï¼ˆ1ã‚®ãƒ«ãƒ‰è¤‡æ•°ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼å¯èƒ½ã€ãŸã ã—å®Ÿéš›ã¯æœ€å¾Œã®1ä»¶ã®ã¿æœ‰åŠ¹ï¼‰
- **GuildConfig**: ã‚®ãƒ«ãƒ‰å…¨ä½“ã®è¨­å®šï¼ˆãƒ¡ãƒ³ã‚·ãƒ§ãƒ³å¯¾è±¡ãªã©ï¼‰
- ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼é€ä¿¡æ™‚ã« GuildConfig ã‹ã‚‰æœ€æ–°ã®è¨­å®šã‚’å–å¾—ã™ã‚‹ã“ã¨ã§ã€Bumpæ¤œçŸ¥å¾Œã®è¨­å®šå¤‰æ›´ã‚‚åæ˜ 

---

## ğŸ”„ å‡¦ç†ãƒ•ãƒ­ãƒ¼

### Bumpæ¤œçŸ¥ã‹ã‚‰é€šçŸ¥ã¾ã§

```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ /bump ã¾ãŸã¯ /up ã‚’å®Ÿè¡Œ
   â†“
2. Disboard/ãƒ‡ã‚£ã‚¹é€ŸãŒBumpæˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡
   â†“
3. messageCreateã‚¤ãƒ™ãƒ³ãƒˆã§æ¤œçŸ¥
  - Bot IDï¼ˆ302050872383242240 or 761562078095867916ï¼‰ã‚’ç¢ºèª
  - `interaction.commandName` ãŒ Disboard ãªã‚‰ `bump`ã€ãƒ‡ã‚£ã‚¹é€Ÿãªã‚‰ `up` ã‹ç¢ºèª
   - serviceName ã‚’ç‰¹å®šï¼ˆ"Disboard" or "Dissoku"ï¼‰
   - GuildConfig ã® enabled ã‚’ç¢ºèªï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ trueï¼‰
  - channelId ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ä¸€è‡´ãƒãƒ£ãƒ³ãƒãƒ«ã®ã¿å‡¦ç†
   â†“
4. BumpReminderManager.setReminder() å®Ÿè¡Œ
   - BumpReminderãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜ï¼ˆstatus: "pending"ï¼‰
  - guildId, channelId, messageId, panelMessageId, serviceName, scheduledAt ã‚’è¨˜éŒ²
  - JobSchedulerï¼ˆsetTimeoutãƒ™ãƒ¼ã‚¹ï¼‰ã§ã‚¿ã‚¤ãƒãƒ¼è¨­å®š
   â†“
5. 2æ™‚é–“çµŒé
   - ã‚¿ã‚¤ãƒãƒ¼ç™ºç«
   - taskFactory å®Ÿè¡Œ:
     a. GuildConfig ã‹ã‚‰æœ€æ–°ã®è¨­å®šã‚’å–å¾—ï¼ˆenabled, mentionRoleId, mentionUserIdsï¼‰
     b. enabled ãŒ false ãªã‚‰é€ä¿¡ã›ãšã«çµ‚äº†
     c. ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³æ–‡å­—åˆ—ã‚’æ§‹ç¯‰
     d. serviceName ã«å¿œã˜ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é¸æŠ
     e. ãƒãƒ£ãƒ³ãƒãƒ«ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ï¼ˆå…ƒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«è¿”ä¿¡ï¼‰
   - BumpReminderãƒ†ãƒ¼ãƒ–ãƒ«ã® status ã‚’ "sent" ã«æ›´æ–°
```

**ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ›´æ–°ã‚¿ã‚¤ãƒŸãƒ³ã‚°:**

- **Bumpæ¤œçŸ¥æ™‚**: BumpReminder ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆï¼ˆstatus: "pending"ï¼‰
- **ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼é€ä¿¡å¾Œ**: status ã‚’ "sent" ã«æ›´æ–°
- **disable ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ™‚**: è©²å½“ã‚®ãƒ«ãƒ‰ã® pending ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ "cancelled" ã«æ›´æ–°

**è¨­å®šå¤‰æ›´ã®å³æ™‚åæ˜ :**

```typescript
// taskFactoryå†…ã§æœ€æ–°ã®è¨­å®šã‚’å–å¾—
const taskFactory = (...) => {
  return async () => {
    // ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼é€ä¿¡æ™‚ã«æœ€æ–°ã®è¨­å®šã‚’å–å¾—
    const currentConfig = await guildConfigRepository.getBumpReminderConfig(guildId);

    // æœ€æ–°ã® mentionRoleId, mentionUserIds ã‚’ä½¿ç”¨
    // â†’ Bumpæ¤œçŸ¥å¾Œã«è¨­å®šå¤‰æ›´ã—ã¦ã‚‚åæ˜ ã•ã‚Œã‚‹
  };
};
```

### Botå†èµ·å‹•æ™‚ã®å¾©å…ƒ

**å®Ÿè£…å ´æ‰€**: `src/bot/events/clientReady.ts`

```typescript
// 1. pending ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚’å…¨ã¦å–å¾—
const restoredCount =
  await bumpReminderManager.restorePendingReminders(taskFactory);

// 2. å„ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚’ãƒ«ãƒ¼ãƒ—
// restorePendingReminders() å†…éƒ¨ã§
// - åŒä¸€ã‚®ãƒ«ãƒ‰ã®é‡è¤‡pendingã‚’æœ€æ–°1ä»¶ã¸æ•´ç†
// - æœŸé™è¶…éåˆ†ã‚’å³æ™‚å®Ÿè¡Œ
// - æœªæ¥åˆ†ã‚’å†ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
```

**å¾©å…ƒã®ç‰¹å¾´:**

- **DBé§†å‹•**: ãƒ¡ãƒ¢ãƒªä¸Šã®ã‚¿ã‚¤ãƒãƒ¼ã¯æ¶ˆå¤±ã™ã‚‹ãŒã€DBã® `pending` ãƒ¬ã‚³ãƒ¼ãƒ‰ã‹ã‚‰å®Œå…¨å¾©å…ƒ
- **éå»æ™‚åˆ»ã®å‡¦ç†**: Botåœæ­¢ä¸­ã«é€šçŸ¥æ™‚åˆ»ã‚’éããŸå ´åˆã§ã‚‚å³åº§ã«é€šçŸ¥
- **serviceNameä¿æŒ**: Disboard/Dissoku ã®ã©ã¡ã‚‰ã‹æ­£ã—ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡

---

## ğŸ›¡ï¸ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### å®Ÿè£…æ¸ˆã¿ã®ã‚¨ãƒ©ãƒ¼å‡¦ç†

**1. ãƒãƒ£ãƒ³ãƒãƒ«ãŒå‰Šé™¤ã•ã‚ŒãŸ / è¦‹ã¤ã‹ã‚‰ãªã„**

```typescript
const channel = await client.channels.fetch(channelId);
if (!channel?.isTextBased()) {
  logger.warn("Bump reminder channel not found", { channelId, guildId });
  return; // ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼é€ä¿¡ã‚’ã‚¹ã‚­ãƒƒãƒ—
}
```

**2. æ©Ÿèƒ½ãŒç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹**

```typescript
const config = await getBumpReminderConfig(guildId);
if (!config?.enabled) {
  logger.debug("Bump reminder disabled", { guildId });
  return; // é€ä¿¡ã›ãšã«çµ‚äº†
}
```

**3. Botå†èµ·å‹•æ™‚ã®å¾©å…ƒã‚¨ãƒ©ãƒ¼**

- pending ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ãƒãƒ£ãƒ³ãƒãƒ«ãŒå­˜åœ¨ã—ãªã„ â†’ ã‚¹ã‚­ãƒƒãƒ—
- è¨­å®šãŒç„¡åŠ¹ â†’ ã‚¹ã‚­ãƒƒãƒ—
- ã‚®ãƒ«ãƒ‰ã‹ã‚‰é€€å‡ºæ¸ˆã¿ â†’ è‡ªç„¶ã«ã‚¹ã‚­ãƒƒãƒ—ï¼ˆguilds.cache ã«å­˜åœ¨ã—ãªã„ï¼‰

### æƒ³å®šã•ã‚Œã‚‹è¿½åŠ å¯¾å¿œï¼ˆæœªå®Ÿè£…ï¼‰

- **ãƒ­ãƒ¼ãƒ«ãŒå‰Šé™¤ã•ã‚ŒãŸ**: ãƒ­ãƒ¼ãƒ«ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã®ã¿é€ä¿¡
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚µãƒ¼ãƒãƒ¼ã‚’é€€å‡º**: ãã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã‚’ã‚¹ã‚­ãƒƒãƒ—
- **Botæ¨©é™ä¸è¶³**: é€ä¿¡ã‚¨ãƒ©ãƒ¼ã‚’ã‚­ãƒ£ãƒƒãƒã—ã¦ãƒ­ã‚°è¨˜éŒ²
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼**: ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰

æœ€æ–°ã®ä»¶æ•°ã¨ã‚«ãƒãƒ¬ãƒƒã‚¸ã¯ [TEST_PROGRESS.md](../progress/TEST_PROGRESS.md) ã‚’å‚ç…§ã€‚

**BumpReminderRepository**:

- [x] create(): ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ä½œæˆï¼ˆserviceNameå«ã‚€ï¼‰
- [x] findById(): IDæ¤œç´¢
- [x] findPendingByGuild(): ã‚®ãƒ«ãƒ‰åˆ¥ã® pending æ¤œç´¢
- [x] findAllPending(): pending ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ã¿å–å¾—
- [x] updateStatus(): ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°
- [x] cancelByGuild(): ã‚®ãƒ«ãƒ‰å˜ä½ã‚­ãƒ£ãƒ³ã‚»ãƒ«
- [x] cleanupOldReminders(): 7æ—¥ä»¥ä¸Šå‰ã®ãƒ¬ã‚³ãƒ¼ãƒ‰å‰Šé™¤

**BumpReminderManager (JobScheduler)**:

- [x] setReminder(): DBä¿å­˜ + ã‚¿ã‚¤ãƒãƒ¼è¨­å®š
- [x] serviceName ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ä¿å­˜
- [x] restorePendingReminders(): èµ·å‹•æ™‚å¾©å…ƒ
- [x] éå»æ™‚åˆ»ã®å³æ™‚å®Ÿè¡Œ
- [x] æœªæ¥æ™‚åˆ»ã®ã‚¿ã‚¤ãƒãƒ¼å†è¨­å®š

**æ—¢å­˜æ©Ÿèƒ½ã¸ã®å½±éŸ¿** (å®Ÿè£…æ¸ˆã¿):

- [x] GuildConfigRepository
- [x] LocaleManager
- [x] ErrorHandler

### ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ

å®Ÿè£…æ¸ˆã¿:

- [x] messageCreateã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒ­ãƒ¼å…¨ä½“
- [x] Disboard/Dissoku ã®æ¤œçŸ¥
- [x] serviceName ã®ä¿å­˜ã¨å–å¾—
- [x] ã‚¿ã‚¤ãƒãƒ¼ç™ºç«ã¨ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼é€ä¿¡
- [x] Botå†èµ·å‹•æ™‚ã®å¾©å…ƒ
  - [x] pending ãƒ¬ã‚³ãƒ¼ãƒ‰ã®å–å¾—
  - [x] é€šçŸ¥æ™‚åˆ»å‰ã®å¾©å…ƒï¼ˆã‚¿ã‚¤ãƒãƒ¼å†è¨­å®šï¼‰
  - [x] é€šçŸ¥æ™‚åˆ»å¾Œã®å¾©å…ƒï¼ˆå³æ™‚é€ä¿¡ï¼‰
- [x] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ°¸ç¶šåŒ–ã®ç¢ºèª
- [x] ãƒ‘ãƒãƒ«UIã®ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯å‡¦ç†
- [x] mentionUserIds ã®å‹•çš„æ›´æ–°ï¼ˆãƒœã‚¿ãƒ³çµŒç”±ï¼‰

---

## ğŸ“ å®Ÿè£…ãƒ¡ãƒ¢

### ãƒ‡ã‚£ã‚¹é€Ÿã®Bot IDç¢ºèªæ–¹æ³•

âœ… **ç¢ºèªæ¸ˆã¿**: `761562078095867916`

1. ãƒ‡ã‚£ã‚¹é€Ÿã‚’ã‚µãƒ¼ãƒãƒ¼ã«æ‹›å¾…
2. `/up` ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ
3. ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€ä¿¡è€…IDã‚’ç¢ºèª
4. ç¢ºèªã—ãŸIDã‚’å®šæ•°ã«è¨­å®š:

```typescript
// src/bot/events/messageCreate.ts
const DISBOARD_BOT_ID = "302050872383242240";
const DISSOKU_BOT_ID = "761562078095867916"; // ç¢ºèªæ¸ˆã¿
```

### JobScheduler ã«ã‚ˆã‚‹å®Ÿè£…

**JobScheduler ã‚’ä½¿ç”¨ã—ãŸç†ç”±:**

1. **ä¸€è²«æ€§**: ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°å‡¦ç†ã‚’å…±é€šåŒ–
2. **å†åˆ©ç”¨æ€§**: ç¹°ã‚Šè¿”ã—ã‚¸ãƒ§ãƒ–ã¨ä¸€å›å®Ÿè¡Œã‚¸ãƒ§ãƒ–ã‚’åŒä¸€APIã§ç®¡ç†
3. **ä¿å®ˆæ€§**: ã‚¸ãƒ§ãƒ–ç™»éŒ²ãƒ»å‰Šé™¤ãƒ»ç›£è¦–ã‚’é›†ç´„

**å®Ÿè£…ã®æ ¸å¿ƒ:**

```typescript
// src/shared/scheduler/jobScheduler.ts
export class BumpReminderManager {
  async setReminder(
    guildId: string,
    channelId: string,
    messageId: string | undefined,
    panelMessageId: string | undefined,
    delayMinutes: number,
    task: () => Promise<void>,
    serviceName?: string,
  ): Promise<void> {
    // 1. DBã«ä¿å­˜ï¼ˆæ°¸ç¶šåŒ–ï¼‰
    const scheduledAt = new Date(Date.now() + delayMinutes * 60 * 1000);
    await this.repository.create(
      guildId,
      channelId,
      scheduledAt,
      messageId,
      panelMessageId,
      serviceName,
    );

    // 2. setTimeoutãƒ™ãƒ¼ã‚¹ã§1å›å®Ÿè¡Œã‚¸ãƒ§ãƒ–ã‚’è¨­å®šï¼ˆãƒ¡ãƒ¢ãƒªç®¡ç†ï¼‰
    this.scheduleTask(jobId, scheduledAt, async () => {
      await task();
      await this.repository.updateStatus(reminderId, "sent");
    });
  }
}
```

### Botå†èµ·å‹•æ™‚ã®å¾©å…ƒæˆ¦ç•¥

**ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ:**

- **DB**: æ°¸ç¶šçš„ãªçœŸå®Ÿã®è¨˜éŒ²ï¼ˆpending ãƒ¬ã‚³ãƒ¼ãƒ‰ï¼‰
- **ãƒ¡ãƒ¢ãƒª**: å®Ÿè¡Œä¸­ã®ã‚¿ã‚¤ãƒãƒ¼ï¼ˆ1å›å®Ÿè¡Œã‚¸ãƒ§ãƒ–ï¼‰

**å¾©å…ƒãƒ•ãƒ­ãƒ¼:**

```typescript
// src/bot/events/clientReady.ts
await bumpReminderManager.restorePendingReminders(taskFactory);

for (const reminder of pendingReminders) {
  const taskFactory = (...) => async () => {
    // âš ï¸ é‡è¦: é€ä¿¡æ™‚ã«æœ€æ–°ã® GuildConfig ã‚’å–å¾—
    const config = await getBumpReminderConfig(guildId);
    // â†’ Bumpæ¤œçŸ¥å¾Œã®è¨­å®šå¤‰æ›´ã‚‚åæ˜ ã•ã‚Œã‚‹
  };

  await bumpReminderManager.setReminder(...);
}
```

### ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³æ§‹ç¯‰ãƒ­ã‚¸ãƒƒã‚¯

**ç©ºè¡Œã‚’é¿ã‘ã‚‹å®Ÿè£…:**

```typescript
// ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ãŒãªã„å ´åˆã¯ç©ºè¡Œã‚’å…¥ã‚Œãªã„
const content = mentionText
  ? `${mentionText}\n${reminderMessage}` // æ”¹è¡Œ1ã¤ã®ã¿
  : reminderMessage; // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã ã‘
```

**çµæœ:**

```
# ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã‚ã‚Š
@BumpRole @User1
â° `/bump`ãŒå‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã£ãŸã‚ˆï¼

# ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ãªã—
â° `/bump`ãŒå‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã£ãŸã‚ˆï¼
```

### é‡è¤‡é˜²æ­¢æ©Ÿæ§‹

æ–°ã—ã„Bumpæ¤œçŸ¥æ™‚ã«ã€åŒã˜ã‚®ãƒ«ãƒ‰ã®æ—¢å­˜pendingãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚’è‡ªå‹•çš„ã«ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ã¾ã™ã€‚

**ä»•çµ„ã¿:**

```typescript
// BumpReminderRepository.create() å†…ã§å®Ÿè¡Œ
async create(guildId, channelId, scheduledAt, messageId, serviceName) {
  // 1. åŒã˜ã‚®ãƒ«ãƒ‰ã®æ—¢å­˜pendingãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«
  await this.cancelByGuild(guildId);

  // 2. æ–°ã—ã„ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚’ä½œæˆ
  const reminder = await this.prisma.bumpReminder.create({...});
  return reminder;
}
```

**å¯¾è±¡:**

- åŒã˜ã‚®ãƒ«ãƒ‰IDã® `pending` ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼

**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹:**

- é€šå¸¸é‹ç”¨ã§ã¯ Disboard/Dissoku ã®2æ™‚é–“åˆ¶é™ã«ã‚ˆã‚Šé‡è¤‡ã¯ç™ºç”Ÿã—ãªã„
- Botå†èµ·å‹•æ™‚ã®ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã§ pending ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒæ®‹ã£ã¦ã„ã‚‹å ´åˆã«æœ‰åŠ¹

### serviceName ã®æ´»ç”¨

**ç›®çš„**: Disboardã¨Dissokuã‚’åŒºåˆ¥ã—ã€é©åˆ‡ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º

**ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼:**

```
messageCreate.ts (æ¤œçŸ¥)
  â†’ serviceName = "Disboard" or "Dissoku"
    â†’ BumpReminderRepository (DBä¿å­˜)
      â†’ BumpReminderManager (ã‚¿ã‚¤ãƒãƒ¼è¨­å®š)
        â†’ taskFactory (é€ä¿¡æ™‚ã« serviceName ã‚’ä½¿ç”¨)
          â†’ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é¸æŠ: "bump.reminder_message.disboard" or "dissoku"
```

**ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é¸æŠãƒ­ã‚¸ãƒƒã‚¯:**

```typescript
let reminderMessage: string;
if (serviceName === "Disboard") {
  reminderMessage = await tGuild(
    guildId,
    "events:bump.reminder_message.disboard",
  );
} else if (serviceName === "Dissoku") {
  reminderMessage = await tGuild(
    guildId,
    "events:bump.reminder_message.dissoku",
  );
} else {
  reminderMessage = await tGuild(guildId, "events:bump.reminder_message"); // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
}
```

### Bumpãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆæ–¹æ³•

**ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã®æœ‰åŠ¹åŒ–:**

`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã§`TEST_MODE`ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ã¨ã€å®Ÿéš›ã®BumpBotãªã—ã§ãƒ†ã‚¹ãƒˆã§ãã¾ã™ã€‚

```bash
# .env
TEST_MODE="true"
```

**ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã®å‹•ä½œ:**

- `test bump` ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã™ã‚‹ã¨ã€Disboardã®`/bump`æ¤œçŸ¥ã¨ã—ã¦å‹•ä½œ
- `test up` ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã™ã‚‹ã¨ã€Dissokuã®`/up`æ¤œçŸ¥ã¨ã—ã¦å‹•ä½œ
- ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã®é…å»¶æ™‚é–“ãŒ **2æ™‚é–“ã‹ã‚‰1åˆ†ã«çŸ­ç¸®**

**ãƒ†ã‚¹ãƒˆæ‰‹é †:**

1. `.env`ã§`TEST_MODE="true"`ã‚’è¨­å®š
2. Botã‚’å†èµ·å‹•
3. Discordãƒãƒ£ãƒ³ãƒãƒ«ã§`test bump`ã¾ãŸã¯`test up`ã‚’é€ä¿¡
4. ãƒ‘ãƒãƒ«UIãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆãƒœã‚¿ãƒ³ã§ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ç™»éŒ²å¯èƒ½ï¼‰
5. 1åˆ†å¾Œã«ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒé€ä¿¡ã•ã‚Œã€ãƒ‘ãƒãƒ«ãŒå‰Šé™¤ã•ã‚Œã‚‹

**æ³¨æ„:**

- æœ¬ç•ªç’°å¢ƒã§ã¯å¿…ãš`TEST_MODE`ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã¾ãŸã¯å‰Šé™¤ã—ã¦ãã ã•ã„
- ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã§ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¤œçŸ¥ã™ã‚‹ãŸã‚ã€é€šå¸¸ã®Botæ¤œçŸ¥ã¯ç„¡åŠ¹åŒ–ã•ã‚Œã¾ã›ã‚“

---

## ğŸ”— å‚è€ƒãƒªã‚½ãƒ¼ã‚¹

- [Disboardå…¬å¼ã‚µã‚¤ãƒˆ](https://disboard.org/)
- [ãƒ‡ã‚£ã‚¹é€Ÿå…¬å¼ã‚µã‚¤ãƒˆ](https://dissoku.net/)
- [Discord.js - MessageCreateEvent](https://discord.js.org/#/docs/discord.js/main/class/Client?scrollTo=e-messageCreate)
- [Discord.js - ButtonBuilder](https://discord.js.org/#/docs/discord.js/main/class/ButtonBuilder)

---

## âœ… å®Ÿè£…ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

### å®Œäº†æ¸ˆã¿

- [x] Disboard/ãƒ‡ã‚£ã‚¹é€Ÿã® Bumpæ¤œçŸ¥ï¼ˆserviceNameå¯¾å¿œï¼‰
- [x] BumpReminderãƒ†ãƒ¼ãƒ–ãƒ«ã«ã‚ˆã‚‹DBæ°¸ç¶šåŒ–
- [x] JobSchedulerï¼ˆ1å›å®Ÿè¡Œã‚¸ãƒ§ãƒ–ï¼‰ã«ã‚ˆã‚‹ã‚¿ã‚¤ãƒãƒ¼ç®¡ç†
- [x] Botå†èµ·å‹•æ™‚ã®å¾©å…ƒï¼ˆpending ãƒ¬ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ï¼‰
- [x] `/bump-reminder-config` ã‚³ãƒãƒ³ãƒ‰ï¼ˆenable/disable/set-mention/viewï¼‰
- [x] ã‚µãƒ¼ãƒ“ã‚¹åˆ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆDisboardç”¨ã¨Dissokuç”¨ï¼‰
- [x] ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³è¨­å®šã®å‹•çš„åæ˜ ï¼ˆé€ä¿¡æ™‚ã«æœ€æ–°è¨­å®šã‚’å–å¾—ï¼‰
- [x] ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæœ‰åŠ¹åŒ–
- [x] åŒ…æ‹¬çš„ãªãƒ†ã‚¹ãƒˆï¼ˆä»¶æ•°ã¯ç¶™ç¶šçš„ã«æ›´æ–°ï¼‰
- [x] æ—¥æœ¬èª/è‹±èªãƒ­ãƒ¼ã‚«ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³
- [x] ãƒ‘ãƒãƒ«UIï¼ˆãƒœã‚¿ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰
  - [x] Bumpæ¤œçŸ¥æ™‚ã®Embedãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ + ãƒœã‚¿ãƒ³è¡¨ç¤º
  - [x] Button Interactionå‡¦ç†
  - [x] å€‹åˆ¥ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ç™»éŒ²ON/OFFåˆ‡ã‚Šæ›¿ãˆ
  - [x] ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼é€ä¿¡å¾Œã®ãƒ‘ãƒãƒ«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‰Šé™¤
- [x] é‡è¤‡Bumpæ™‚ã®å¤ã„ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼è‡ªå‹•ã‚­ãƒ£ãƒ³ã‚»ãƒ«

### æœªå®Ÿè£…

- ãªã—

### ä»Šå¾Œã®æ”¹å–„æ¡ˆ

1. **çµ±è¨ˆæ©Ÿèƒ½**: Bumpå›æ•°ã®è¨˜éŒ²ã¨è¡¨ç¤º
2. **é€šçŸ¥ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º**: ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ©Ÿèƒ½
