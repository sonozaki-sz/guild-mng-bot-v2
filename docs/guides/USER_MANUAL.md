# ayasono 取扱説明書

> Discord サーバーをもっと便利に — ayasono のすべての機能と使い方

最終更新: 2026年3月1日

---

## 📖 はじめに

**ayasono** は、Discord サーバーの管理・コミュニティ運営をより快適にする多機能 Bot です。
この取扱説明書では、**サーバーメンバー・管理者の両方**の視点から、各機能の使い方をわかりやすく説明しています。

### この説明書の読み方

| アイコン | 意味                                        |
| -------- | ------------------------------------------- |
| 👤       | **メンバー向け** — 全員が使える機能         |
| 🛡️       | **管理者向け** — 管理権限が必要な設定・操作 |
| ✅       | 現在利用可能な機能                          |
| 🚧       | 近日公開予定の機能（現在準備中）            |
| 💡       | 活用のヒント                                |
| ⚠️       | 注意事項                                    |

---

## ✨ 機能一覧

| 機能                                                   | できること                                         | 状態 |
| ------------------------------------------------------ | -------------------------------------------------- | ---- |
| [AFK機能](#-afk機能)                                   | VCの離席中メンバーをAFKチャンネルへ移動            | ✅   |
| [Bumpリマインダー](#-bumpリマインダー機能)             | Bumpの2時間後に自動でリマインドを送信              | ✅   |
| [VC自動作成（VAC）](#-vc自動作成機能vac)               | トリガーチャンネルに入ると専用VCが自動で作られる   | ✅   |
| [スティッキーメッセージ](#-スティッキーメッセージ機能) | 重要メッセージを常にチャンネル最下部に表示し続ける | ✅   |
| [メンバーログ](#-メンバーログ機能)                     | 参加・脱退を指定チャンネルに記録                   | ✅   |
| [メッセージ一括削除](#-メッセージ一括削除機能)         | 条件を指定してメッセージをまとめて削除             | ✅   |

---

## 🎤 AFK機能

### この機能でできること

VCに参加中のメンバーを、指定した「AFKチャンネル」へ素早く移動させる機能です。
「音声に反応がないメンバーを整理したい」「自分が少し離席したい」といった場面で活躍します。

### 👤 メンバー向け — 使い方

#### 自分をAFKチャンネルへ移動する

まず自分がボイスチャンネルに入った状態で、任意のテキストチャンネルに入力します。

```
/afk
```

これだけです。Bot がすぐに AFK チャンネルへ移動させてくれます。

#### 他のメンバーをAFKチャンネルへ移動する

```
/afk user:@ユーザー名
```

**実行例:**

```
/afk user:@田中さん
```

**💡 ヒント:** 少し席を外すときや、長時間応答がないメンバーを整理したいときに便利です。

**⚠️ 注意事項:**

- 対象のメンバーが VCに参加していないと移動できません。
- AFK機能が管理者によって有効化されている必要があります。
- AFKチャンネルが設定されていない場合は動作しません。

---

### 🛡️ 管理者向け — 初期設定

AFK 機能を使うには、まず管理者が AFK チャンネルを設定する必要があります。

#### AFKチャンネルを設定する

```
/afk-config set-channel channel:#AFKチャンネル名
```

これを実行すると AFK 機能が自動で有効になります。

#### 現在の設定を確認する

```
/afk-config view
```

設定中のAFKチャンネルと機能の有効/無効状態が表示されます。

---

## ⏰ Bumpリマインダー機能

### この機能でできること

[Disboard](https://disboard.org/) や [ディス速](https://dissoku.net/) の Bump コマンドを自動検知し、次に Bump できるようになる **2時間後**に自動でリマインダーを送信します。
「Bump の時間を忘れてしまう」「誰かが Bump してくれるのを待っている」という状況を解消します。

### 👤 メンバー向け — リマインダーを受け取る

Bump が実行されると、Bot からボタン付きのメッセージが届きます。

```
[🔔 メンションする] [🔕 メンションしない]
```

- **🔔 メンションする** — 2時間後のリマインダーで自分にメンションが届きます。
- **🔕 メンションしない** — 登録しない（またはキャンセルする）場合に押します。

**💡 ヒント:** Bumpに協力したいときは「🔔 メンションする」を押してリマインダーを登録しておきましょう。

---

### 🛡️ 管理者向け — 設定

#### リマインダーを有効化する

**デフォルトで有効**なので、通常は操作不要です。

```
/bump-reminder-config enable
```

#### リマインダーを無効化する

```
/bump-reminder-config disable
```

#### リマインダー時にメンションするロールを設定する

```
/bump-reminder-config set-mention role:@Bumpロール
```

#### リマインダー時にメンションするユーザーを設定する

```
/bump-reminder-config set-mention user:@ユーザー名
```

#### メンション設定を削除する

```
# ロール設定だけを削除
/bump-reminder-config remove-mention target:role

# 特定のユーザー設定を削除
/bump-reminder-config remove-mention target:user

# 全ユーザー設定をまとめて削除
/bump-reminder-config remove-mention target:users

# ロール・ユーザーすべてを削除
/bump-reminder-config remove-mention target:all
```

#### 現在の設定を確認する

```
/bump-reminder-config view
```

**💡 ヒント:** `@Bump担当` のようなロールを作って設定しておくと、有志のメンバーだけにリマインダーが届くようにできます。

---

## 🎤 VC自動作成機能（VAC）

### この機能でできること

「CreateVC」などの専用チャンネルに入ると、**自分だけの専用VC** が自動で作られます。
全員が退出すると、作られた VC は自動で削除されます。VC を手動で作る手間が省けます。

### 👤 メンバー向け — 使い方

#### VCを自動作成する

管理者が設定したトリガーチャンネル（例: `➕ CreateVC`）に入ります。
すると、あなたの専用VC（例: `田中さん's Room`）が自動で作成され、そこに移動されます。

#### 操作パネルでVCの設定を変更する

作成された VC のチャット欄に、**操作パネル**が自動で表示されます。
パネルのボタンを押すと、VC の設定を変更できます。

```
┌─────────────────────────────────┐
│ 🎤 ボイスチャンネル操作パネル  │
│                                 │
│  [✏️ VC名を変更]                │
│  [👥 人数制限を変更]            │
│  [🔇 メンバーをAFKに移動]       │
│  [🔄 パネルを最下部に移動]      │
└─────────────────────────────────┘
```

| ボタン                  | できること                              |
| ----------------------- | --------------------------------------- |
| ✏️ VC名を変更           | VCの名前を好きな名前に変更              |
| 👥 人数制限を変更       | 参加できる人数の上限を設定（0で無制限） |
| 🔇 メンバーをAFKに移動  | このVCのメンバーをAFKチャンネルへ送る   |
| 🔄 パネルを最下部に移動 | チャットが流れたときパネルを再表示      |

**⚠️ 注意:** パネルの操作はそのVCに参加中のメンバーのみ実行できます。

#### コマンドでVCの設定を変更する

パネルの代わりに、スラッシュコマンドでも設定変更できます。

```
# VC名を変更する
/vac vc-rename name:みんなのたまり場

# 人数制限を5人にする
/vac vc-limit limit:5

# 人数制限を無制限にする
/vac vc-limit limit:0
```

**⚠️ 注意:** これらのコマンドも、そのVCに参加中にのみ実行できます。

**💡 ヒント:**

- 名前を変えておくと、どんな集まりか一目でわかります。
- 少人数で話したいときは人数制限を設定しましょう。
- 全員が退出すると VC は自動で削除されます。

---

### 🛡️ 管理者向け — 設定

#### トリガーチャンネルを作成する

```
# カテゴリを指定して作成する
/vac-config create-trigger-vc category:カテゴリ名

# カテゴリなし（トップレベル）で作成する
/vac-config create-trigger-vc
```

実行すると「➕ CreateVC」という名前のVCが指定のカテゴリに作成されます。
このチャンネルにメンバーが入ると、自動でその人専用のVCが作られます。

#### トリガーチャンネルを削除する

```
/vac-config remove-trigger-vc category:カテゴリ名
```

#### 現在の設定を確認する

```
/vac-config view
```

---

## 📌 スティッキーメッセージ機能

### この機能でできること

チャンネルのルールや重要なお知らせを、**常にチャンネルの一番下**に表示し続ける機能です。
Discord 標準の「ピン留め」は上に固定されますが、スティッキーメッセージは常に最新メッセージの直下に表示されるため見逃されにくくなります。

**主な用途の例:**

- チャンネルのルールやマナーを常に表示
- イベント告知や締め切りを見落とさないように
- 質問チャンネルのテンプレートを常時表示
- 注意事項をいつでも確認できるように

### 🛡️ 管理者向け — 使い方

#### スティッキーメッセージを設定する

**プレーンテキストで設定する:**

```
/sticky-message set channel:#チャンネル名
```

コマンドを実行すると、メッセージ内容を入力するポップアップが表示されます。

**Embed（カード形式）で設定する:**

```
/sticky-message set channel:#チャンネル名 style:embed
```

Embed で設定するとタイトル・説明文・カラーを設定でき、より見やすいメッセージになります。

**使用例:**

```
# ルールチャンネルにプレーンテキストでスティッキーメッセージを設定
/sticky-message set channel:#rules

# お知らせチャンネルにEmbed（緑色）で設定
/sticky-message set channel:#announcements style:embed
```

> コマンド実行後にポップアップが開きます。内容を入力して送信してください。

#### スティッキーメッセージを更新する

```
/sticky-message update channel:#チャンネル名
```

更新内容のポップアップが表示されます。変更したい項目だけ入力してください。

#### スティッキーメッセージを削除する

```
/sticky-message remove channel:#チャンネル名
```

Discord 上のメッセージも同時に削除されます。

#### 設定中のスティッキーメッセージを確認する

```
/sticky-message view
```

このサーバーで設定中のチャンネル一覧が表示されます。チャンネルを選ぶと詳細が確認できます。

**💡 ヒント:** ルールや告知を Embed 形式で作ると、色やタイトルで目を引きやすくなります。

---

## 👥 メンバーログ機能

### この機能でできること

サーバーへのメンバー参加・脱退を指定したチャンネルに自動で記録します。
誰がいつ参加・脱退したかを詳細な情報つきで通知します。

### 👤 メンバー向け — 通知の見方

参加・脱退があると、設定されたチャンネルに自動で通知が投稿されます。

**参加通知（緑色）に表示される情報:**

| フィールド         | 内容                                  |
| ------------------ | ------------------------------------- |
| ユーザー           | 参加したメンバーのメンション          |
| アカウント作成日時 | Discordアカウントの作成日時と経過年齢 |
| サーバー参加日時   | このサーバーへの参加日時              |
| メンバー数         | 参加後の現在メンバー数                |

フッターには `ようこそ！ • Member #<番号>` と参加したメンバーの番号が表示されます。

**退出通知（赤色）に表示される情報:**

| フィールド         | 内容                                  |
| ------------------ | ------------------------------------- |
| ユーザー           | 退出したメンバーのメンション          |
| アカウント作成日時 | Discordアカウントの作成日時と経過年齢 |
| サーバー参加日時   | このサーバーへの参加日時              |
| サーバー退出日時   | 退出日時                              |
| 滞在期間           | サーバーへの滞在日数                  |
| メンバー数         | 退出後の現在メンバー数                |

フッターには `またね！ • Member #<番号>` と退出したメンバーの番号が表示されます。

---

### 🛡️ 管理者向け — 設定

#### ログチャンネルを設定する

```
/member-log-config set-channel channel:#メンバーログ
```

チャンネルを設定すると機能が自動で有効になります。

#### 機能を有効化する

```
/member-log-config enable
```

#### 機能を無効化する

```
/member-log-config disable
```

#### 現在の設定を確認する

```
/member-log-config view
```

---

## 🗑️ メッセージ一括削除機能

### この機能でできること

**モデレーター向け**の機能です。条件を指定してサーバー内のメッセージを一括削除できます。

- 特定ユーザーのメッセージをサーバー全体から一掃
- Bot / Webhook が投稿したメッセージをまとめて削除
- キーワードを含むメッセージを絞り込んで削除
- 特定期間（日数・日付範囲）のメッセージを削除

> **⚠️ 必要な権限**: メッセージ管理（Manage Messages）またはサーバー管理者

---

### 🛡️ 基本的な使い方

#### オプション一覧

| オプション | 型         | 説明                                                                          |
| ---------- | ---------- | ----------------------------------------------------------------------------- |
| `count`    | 数値       | 削除する件数の上限。チャンネル未指定の場合は**必須**                          |
| `user`     | 文字列     | 削除対象のユーザーID またはメンション（`<@ID>`）。Bot の ID も指定可          |
| `bot`      | true/false | `true` にすると Bot・Webhook のメッセージのみを削除対象にする                 |
| `keyword`  | 文字列     | 指定キーワードを含むメッセージのみ削除（大文字小文字を区別しない）            |
| `days`     | 数値       | 過去 N 日以内のメッセージのみ対象（`after`/`before` とは排他）                |
| `after`    | 日付       | この日時以降のメッセージのみ対象。形式: `YYYY-MM-DD` or `YYYY-MM-DDTHH:MM:SS` |
| `before`   | 日付       | この日時以前のメッセージのみ対象。形式: `YYYY-MM-DD` or `YYYY-MM-DDTHH:MM:SS` |
| `channel`  | チャンネル | 対象チャンネルを指定。**未指定の場合はサーバー全体**が対象                    |

#### 使用例

```
# 特定チャンネルの最新30件を削除
/message-delete count:30 channel:#general

# サーバー全体から特定ユーザーのメッセージを最大100件削除
/message-delete count:100 user:123456789012345678

# サーバー全体から全 Bot メッセージを最大50件削除
/message-delete count:50 bot:true

# キーワードを含むメッセージを特定チャンネルから削除
/message-delete keyword:スパム channel:#general

# 過去7日間のメッセージを特定チャンネルから削除
/message-delete days:7 channel:#spam-channel

# 日付範囲を指定して削除
/message-delete after:2026-01-01 before:2026-01-31 channel:#old-channel

# 特定ユーザーの過去30日分を最大200件削除（サーバー全体）
/message-delete count:200 user:@スパマー days:30
```

#### 注意事項

- **チャンネル未指定の場合は `count` が必須**です。サーバー全体を件数無制限でスキャンすると処理が非常に重くなるため制限しています
- フィルタ条件（`count`・`user`・`bot`・`keyword`・`days`・`after`・`before`）が何も指定されていない場合は実行できません
- `days` と `after`/`before` は同時に指定できません
- 14日以上前のメッセージは個別削除になるため、件数が多いと時間がかかります
- **この操作は取り消せません**

#### 実行確認ダイアログ

デフォルトでは削除実行前に確認ダイアログが表示されます。ダイアログで削除条件を確認してから「✅ 削除する」を押すことで削除が開始されます。

「次回から確認しない」をONにして「✅ 削除する」を押すと、次回以降はダイアログをスキップできます。
`/message-delete-config confirm:true` で再度有効化できます。

#### 進捗表示

実行中はスキャン状況・削除進捗がリアルタイムで表示されます：

```
スキャン中... (12/65) general — 1200件スキャン済
削除中... (spam-channel) 5 / 30件
```

#### 実行後

削除完了後に削除した件数・メッセージの内容（投稿者/日付/本文）がページネーション付きで表示されます。投稿者・本文・日付でフィルタリングすることも可能です。

---

### 🛡️ 確認スキップ設定

```
# 確認ダイアログをスキップ（毎回の確認が不要な場合）
/message-delete-config confirm:false

# 確認ダイアログを再度有効化
/message-delete-config confirm:true
```

---

## ❓ よくある質問（FAQ）

### AFK機能について

**Q. AFK機能で「機能が無効です」と表示される。**
A. 管理者がまだ AFK チャンネルを設定していません。`/afk-config set-channel` を実行してください。

**Q. 他のメンバーをAFKに移動できない。**
A. 対象のメンバーがボイスチャンネルに参加していることを確認してください。VCに入っていないと移動できません。

---

### Bumpリマインダーについて

**Q. Bumpしたのにリマインダーが来ない。**
A. 以下を確認してください。

- ayasono がサーバーに参加しており、そのチャンネルを閲覧できる権限があるか
- `/bump-reminder-config view` で機能が有効になっているか
- メンション設定（ロール・ユーザー）が設定されているか、またはリマインダー登録ボタンを押しているか

---

### VC自動作成（VAC）について

**Q. CreateVC に入ったのに VC が作られない。**
A. 以下を確認してください。

- ayasono がチャンネルを作成できる権限（`チャンネルの管理`）を持っているか
- `/vac-config view` でトリガーチャンネルが正しく設定されているか

**Q. VCのパネルが流れてしまって見つけられない。**
A. パネルは VC のチャット欄にあります。チャットを少しスクロールしてみてください。または `/vac vc-rename` などのコマンドを使う方法もあります。

---

### スティッキーメッセージについて

**Q. メッセージが最下部に表示されなくなった。**
A. Bot がチャンネルでメッセージを送信する権限があるか確認してください。また、`/sticky-message view` で設定が有効になっているか確認できます。

**Q. スティッキーメッセージを Embed で設定したい。**
A. `/sticky-message set channel:#チャンネル名 embed:true` を実行してください。ポップアップでタイトル・説明・カラーを入力できます。

---

## 🔧 Botに必要なサーバー権限

管理者の方は、ayasono に以下の権限が付与されていることをご確認ください。
権限が不足すると一部の機能が正常に動作しない場合があります。

| 権限                 | 必要な機能                   |
| -------------------- | ---------------------------- |
| メッセージを送信     | すべての機能                 |
| メッセージ履歴を読む | スティッキーメッセージ       |
| 埋め込みリンク       | Embed形式メッセージの表示    |
| メッセージの管理     | スティッキーメッセージの削除 |
| チャンネルの管理     | VC自動作成                   |
| メンバーを移動       | AFK機能                      |

---

## 🌐 多言語対応

ayasono はサーバーごとに **日本語** と **英語** を切り替えて使用できます。
デフォルトは日本語です。設定変更については管理者にご相談ください。

---

## 🔗 関連ドキュメント

- [コマンドリファレンス（開発者・管理者向け詳細）](COMMANDS.md)
- [プロジェクト概要](../../README.md)
